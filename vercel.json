{
  "version": 2,
  "env": {
    "PORT": "5000",
    "NODE_ENV": "production"
  },
  "builds": [
    {
      "src": "server/dist/main.js",
      "use": "@vercel/node"
    },
    {
      "src": "client/dist/**",
      "use": "@vercel/static",
      "config": {
        "includeFiles": ["client/dist/**"]
      }
    }
  ],
  "rewrites": [
    {
      "source": "/kobo-book-images/:path*",
      "destination": "https://cdn.kobo.com/book-images/:path*"
    },
    {
      "source": "/rakuten-image/:path*",
      "destination": "https://thumbnail.image.rakuten.co.jp/:path*"
    },
    {
      "source": "/google-books/:path*",
      "destination": "https://books.google.com/books/:path*"
    },
    {
      "source": "/api/:path*",
      "destination": "/server/dist/main.js"
    },
    {
      "source": "/",
      "destination": "client/dist/index.html"
    },
    {
      "source": "/:path(.+\\..+)",
      "destination": "/client/dist/:path"
    },
    {
      "source": "/:path*",
      "destination": "/client/dist/index.html"
    }
  ]
}
